var $jscomp$templatelit$0=[" "];$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var USER_CONFIG_REF="extext-config";var userConfig={useHorizLayout:false,content:""};
onload=function(){var storedConfig=localStorage.getItem(USER_CONFIG_REF);if(storedConfig)userConfig=JSON.parse(storedConfig);var $jscomp$destructuring$var0=userConfig;var content=$jscomp$destructuring$var0.content;var useHorizLayout=$jscomp$destructuring$var0.useHorizLayout;editor.setValue(content);if(useHorizLayout){document.body.className="horiz";horiz.checked=true}if(location.href.includes("#key-shortcuts"))renderKeyShortcuts()};
var runCode=function(){var content=editor.getValue();userConfig.content=content;localStorage.setItem(USER_CONFIG_REF,JSON.stringify(userConfig));f.srcdoc=content};var capCamel=function(s){return s.charAt(0).toUpperCase()+s.substring(1).split(/(?=[A-Z])/).join($jscomp$templatelit$0)};
var mapToTableRows=function(map,isSublime){return Object.keys(map).map(function(key){var val=map[key];var action=val===runCode?"Run code":val===showKeyShortcuts?"Show Key Shortcuts":capCamel(val);var isOverridden=isSublime&&editor.options.extraKeys[key];return"<tr><td>"+key+"</td><td>"+action+(isOverridden?" <span class='overridden'>(overridden)</span>":"")+"</td></tr>"}).join("")};
var renderKeyShortcuts=function(){var keyShortcutsTable=document.querySelector(".modal-window > div > .modal-content");keyShortcutsTable.innerHTML='<table class="keyshortcuts-table"><thead><tr><th>Keys</th><th>Action</th></tr></thead>\n    <tbody>\n      '+mapToTableRows(editor.options.extraKeys)+'\n      <tr><th colspan="2" style="padding-top:.5rem">Sublime Keyshortcuts</th></tr>\n      '+mapToTableRows(CodeMirror.keyMap.sublime,true)+"\n    </tbody>\n  </table>"};
keyShortcuts.onclick=function(e){e.preventDefault();showKeyShortcuts()};var showKeyShortcuts=function(){window.location="#key-shortcuts";renderKeyShortcuts()};var hideKeyShortcuts=function(){window.location="#";editor.focus()};document.body.onkeydown=function(e){if(e.keyCode===27)hideKeyShortcuts();else if(e.ctrlKey&&e.keyCode===190)showKeyShortcuts()};
var saveToFile=function(){var content=editor.getValue();var mimeType="text";var fileName=prompt("Enter filename","extext-"+getTimestamp()+".html");if(!fileName)return;var a=document.createElement("a");var blob=new Blob([content],{type:mimeType});var url=URL.createObjectURL(blob);a.setAttribute("href",url);a.setAttribute("download",fileName);a.click()};
var toggleHorizLayout=function(e){var $jscomp$destructuring$var1=e.target;var checked=$jscomp$destructuring$var1.checked;userConfig.useHorizLayout=checked;document.body.className=checked?"horiz":""};
var editor=CodeMirror.fromTextArea(c,{autofocus:true,mode:{name:"htmlmixed",globalVars:true},theme:"material-darker",keyMap:"sublime",lineNumbers:true,lineWrapping:true,indentUnit:2,tabSize:2,indentWithTabs:false,smartIndent:false,matchBrackets:true,autoCloseBrackets:true,autoCloseTags:true,matchTags:true,styleActiveLine:true,highlightSelectionMatches:{minChars:2,showToken:/\w/,annotateScrollbar:true,style:"matchhighlight"},extraKeys:{"Cmd-'":runCode,"Ctrl-'":runCode,"Cmd-S":runCode,"Ctrl-S":runCode,
"Cmd-Enter":runCode,"Ctrl-Enter":runCode,"Shift-Alt-Up":"duplicateLine","Shift-Alt-Down":"duplicateLine","Ctrl-.":showKeyShortcuts,"Ctrl-D":"deleteLine","Cmd-D":"deleteLine","Ctrl-Space":"autocomplete"}});run.onclick=function(){return runCode()};save.onclick=function(){return saveToFile()};horiz.onclick=toggleHorizLayout;var pad=function(n){return n>9?n:"0"+n};
var getTimestamp=function(){var format="FullYear Month Date - Hours Minutes Seconds".split(" ");var date=new Date;return format.map(function(a){return a==="-"?a:pad(date["get"+a]()+(a==="Month"?1:0))}).join("")};
