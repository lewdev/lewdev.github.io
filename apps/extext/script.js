var USER_CONFIG_REF="extext-config";var editor=CodeMirror.fromTextArea(c,{autofocus:true,mode:"htmlmixed",theme:"material-darker",keyMap:"sublime",lineNumbers:true,lineWrapping:true,indentUnit:2,tabSize:2,indentWithTabs:false,matchBrackets:true,autoCloseBrackets:true,autoCloseTags:true,matchTags:true,styleActiveLine:true,highlightSelectionMatches:{minChars:2,showToken:/\w/,annotateScrollbar:true,style:"matchhighlight"}});var userConfig={useHorizLayout:false,content:""};
onload=function(){var storedConfig=localStorage.getItem(USER_CONFIG_REF);if(storedConfig)userConfig=JSON.parse(storedConfig);var $jscomp$destructuring$var0=userConfig;var content=$jscomp$destructuring$var0.content;var useHorizLayout=$jscomp$destructuring$var0.useHorizLayout;editor.setValue(content);if(useHorizLayout){document.body.className="horiz";horiz.checked=true}};
var runCode=function(){var content=editor.getValue();userConfig.content=content;localStorage.setItem(USER_CONFIG_REF,JSON.stringify(userConfig));f.srcdoc=content};var saveToFile=function(){var content=editor.getValue();var mimeType="text";var fileName="extext-"+getTimestamp()+".html";var a=document.createElement("a");var blob=new Blob([content],{type:mimeType});var url=URL.createObjectURL(blob);a.setAttribute("href",url);a.setAttribute("download",fileName);a.click()};
var toggleHorizLayout=function(e){var $jscomp$destructuring$var1=e.target;var checked=$jscomp$destructuring$var1.checked;userConfig.useHorizLayout=checked;document.body.className=checked?"horiz":""};run.onclick=function(){return runCode()};save.onclick=function(){return saveToFile()};horiz.onclick=toggleHorizLayout;var keyshortcuts={"Cmd-'":runCode,"Ctrl-'":runCode,"Cmd-S":saveToFile,"Ctrl-S":saveToFile};CodeMirror.keyMap.default=Object.assign(CodeMirror.keyMap.default,keyshortcuts);
var pad=function(n){return n<10?"0"+n:n};var getTimestamp=function(){var d=new Date;var dateAttributes="FullYear, Month, Date, -, Hours, Minutes, Seconds".split(", ");return dateAttributes.map(function(a){return a==="-"?a:pad(d["get"+a]())}).join("")};
