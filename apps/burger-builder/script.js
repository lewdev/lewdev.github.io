var aa="function"==typeof Object.defineProperties?Object.defineProperty:function(c,b,d){c!=Array.prototype&&c!=Object.prototype&&(c[b]=d.value)};function ba(c){c=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,c];for(var b=0;b<c.length;++b){var d=c[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var ha=ba(this);
function r(c,b){if(b){var d=ha;c=c.split(".");for(var e=0;e<c.length-1;e++){var f=c[e];f in d||(d[f]={});d=d[f]}c=c[c.length-1];e=d[c];b=b(e);b!=e&&null!=b&&aa(d,c,{configurable:!0,writable:!0,value:b})}}r("Array.prototype.fill",function(c){return c?c:function(b,d,e){var f=this.length||0;0>d&&(d=Math.max(0,f+d));if(null==e||e>f)e=f;e=Number(e);0>e&&(e=Math.max(0,f+e));for(d=Number(d||0);d<e;d++)this[d]=b;return this}});
r("Object.is",function(c){return c?c:function(b,d){return b===d?0!==b||1/b===1/d:b!==b&&d!==d}});r("Array.prototype.includes",function(c){return c?c:function(b,d){var e=this;e instanceof String&&(e=String(e));var f=e.length;d=d||0;for(0>d&&(d=Math.max(d+f,0));d<f;d++){var g=e[d];if(g===b||Object.is(g,b))return!0}return!1}});
r("String.prototype.includes",function(c){return c?c:function(b,d){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(b,d||0)}});function ia(c){c=c.toString().split(".");c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return c.join(".")};var u=function(){function c(p){d();var h=b(p);h&&(h.play(),h.loop=!0,h.volume=.1);f=p}function b(p){if(!p)return null;var h=g[p];return h?h:(console.error("Sound '"+p+"' not found"),null)}function d(){var p=b(f);p&&p.pause()}var e=null,f=null,g=null,m={addPart:"addPart - Jump 1.wav",clear:"clear - Select 1.wav",endGame:"endGame - Victory SoundFX2.ogg",match:"match - Fruit collect 1.wav",noMatch:"noMatch - Text 1.wav",gameBgMusic:"game - POL-star-way-short.wav",menuBgMusic:"menu - POL-follow-me-short.wav"};
return{J:function(p){if(!g){g={};for(var h in m)g[h]=new Audio("./audio/"+m[h])}p()},M:d,L:function(){c(f)},play:function(p){if(e){var h=b(e);h&&(h.currentTime=0,h.pause())}(h=b(p))&&h.play();e=p},K:c}}();function qa(c){return c[Math.floor(Math.random()*c.length)]};function A(c,b){this.text=c;this.x=b.x;this.y=b.y;this.b=b.b;this.a=b.a;this.font=b.font;this.value=b.value;this.fontSize=b.fontSize;this.w=b.w;this.color=b.color;this.mode=b.mode;this.hidden=b.hidden||!1;this.c=b.c||"both";this.h=b.h;this.position=b.position;this.onclick=b.onclick};var R={text:function(c,b){var d=b.align||"center",e=b.opacity||1,f=b.x,g=b.y;D.font=b.fontSize+"px "+(b.fontStyle||"Arial");D.fillStyle=b.color;D.globalAlpha=e;b=D.measureText(c);"center"===d?f-=b.width/2:"right"===d&&(f-=b.width);D.fillText(c,f,g);D.globalAlpha=1},clear:function(c){D.fillStyle=c||"white";D.clearRect(0,0,F.width,F.height);D.fillRect(0,0,F.width,F.height)},i:function(c){var b=c.f*c.h*c.scale,d=c.b*c.h*c.scale,e=c.a*c.h*c.scale,f=c.color,g=c.c,m=c.opacity,p=c.x-d/2;c=c.y-e/2;var h=
e;g=g?g:"";D.strokeStyle=f;D.fillStyle=f;D.lineJoin="round";D.lineWidth=b;g&&D.strokeRect(p+.5*b,c+.5*b,d-b,e-b);"top"===g?(c+=.5*b,h-=.5*b):"bottom"===g?h-=b:"both"===g&&(c+=.5*b,h-=b);D.globalAlpha=m||1;D.fillRect(p,c,d,h);D.stroke();D.fill()}};var V=null,W=null,ra={bottomBun:{b:50,a:8,c:"bottom",color:"#d2aa99",f:5},burger:{b:48,a:8,c:"both",color:"#854c30",f:7},lettuce:{b:48,a:3,c:"both",color:"#6daa2c",f:2},tomato:{b:45,a:3,color:"#d04648",f:2},cheese:{b:45,a:2,c:"both",color:"#dad45e",f:2},onion:{b:45,a:2,c:"both",color:"#8595a1",f:2},topBun:{b:50,a:10,c:"top",color:"#d2aa99",f:10}};function sa(){if(!V){V=[];for(var c in ra)V.push(c)}return V}function ta(){if(!W){W=[];for(var c in ra)-1===c.indexOf("Bun")&&W.push(c)}return W}
var ua=["Excellent","Fantastic","Good Job","Awesome","Sick Move"];var X=function(){function c(e){return e.includes("Bun")?"":e.charAt(0).toUpperCase()}function b(e){var f=ra[e];f||console.log("Part '"+e+"' was not found!");return f}function d(e){switch(e){case 1:return"\ud83d\udfca \u2606 \u2606";case 2:return"\ud83d\udfca \ud83d\udfca \u2606";case 3:return"\ud83d\udfca \ud83d\udfca \ud83d\udfca"}return"\u2730 \u2730 \u2730"}return{g:function(e,f,g,m,p){var h=m;h||(h=1);var v,w=0,G=e.length;for(v=0;v<G;v++){var H=e[v];H=b(H);w+=H.a*h*p}g-=w/2;w=e.length;for(h=w-
1;0<=h;h--){v=C;var C=e[h];C=b(C);h<w-1&&(g=v?g+(C.a*m/2+v.a*m/2)*p:g+C.a*m/2*p);R.i({x:f,y:g,b:C.b,a:C.a,f:C.f,color:C.color,h:p,c:C.c,scale:m})}},C:function(e,f,g,m,p){var h=e.length;g-=8*p*h*m/2;for(--h;0<=h;h--){var v=e[h];if(-1===v.indexOf("Bun")){var w=b(v);if(!w)break;0<h&&(g+=8*m*p);R.i({x:f,y:g,b:8,a:8,f:1,color:w.color,h:p,c:"both",scale:m});w=8*m*p;R.text(c(v),{x:f,y:g+.4*w,b:w,a:w,fontSize:w,align:"center",color:"#140c1c"})}}},G:b,H:c,F:function(e){var f=["bottomBun"],g;for(g=0;g<e;g++)f.push(qa(ta()));
f.push("topBun");return f},v:function(e,f,g,m){R.text(d(e),{x:f,y:g,fontSize:m,align:"center",color:"#dad45e"})},I:d}}();var va={g:function(c,b,d,e){var f=10*c,g=d-20*c;X.g(sa(),b,g,.7,c);R.text("Burger Builder",{x:b,y:g+20*c,fontSize:f,align:"center",color:"#757161"});R.text("Bank: $"+ia(e.bank||0),{x:b,y:2*d-10*c,fontSize:.7*f,align:"center",color:"#757161"})}};var wa={g:function(c,b,d,e){b-=20*c;d=39.5*c;e=e.bestLevels;var f=5*c,g,m=0,p=0;for(g=0;9>g;g++){var h=g+1;if(h=e["level"+h])h=h.stars?h.stars:0,X.v(h,b+20*m++*c,d+25.5*p*c,f);3<=m&&(m=0,p++)}}};var xa=function(){function c(b,d,e,f){e=f.currGame.maxRoundTimeMs;var g=4*b,m=6*b;f=e-f.currGame.currRound.time;R.i({x:d+0+1*b,y:m-1*b,b:32,a:7,f:3,color:"#442434",h:b,c:"both",scale:1});R.i({x:d+0+1*b,y:m-1*b,b:f/e*30,a:6,f:2,color:"#4e4a4e",h:b,c:"both",scale:1});R.text(Math.floor(f/1E3)+"s",{x:d+0,y:m+.3*b,fontSize:g,color:"#8595a1"})}return{g:function(b,d,e,f){var g=f.currGame.currRound.targetBurgerArr;X.g(g,d,22*b,.55,b);X.C(g,d+22*b,19.8*b,.55,b);g=f.currGame.currRound.burgerArr;X.g(g,d,e,1,
b);X.C(g,d+40*b,e,1,b);g=f.currGame.level;var m=42*b,p=6*b,h=9*b;R.i({x:d+m,y:h-2*b,b:22,a:8,f:3,color:"#d27d2c",h:b,c:"both",scale:1});R.text("Level "+g,{x:d+m,y:h,fontSize:p,align:"center",color:"#deeed6"});g=42*b;m=8*b;p=20*b;R.text(f.currGame.rounds.length+1+" of "+f.currGame.roundCount,{x:d+g,y:p,fontSize:m,align:"center",color:"#8595a1"});h="";switch(f.currGame.failCount){case 1:h="\ud83d\udfae";break;case 2:h="\ud83d\udfae \ud83d\udfae";break;case 3:h="\ud83d\udfae \ud83d\udfae \ud83d\udfae"}h&&
R.text(h,{x:d+g,y:p+1.2*m,fontSize:m,align:"center",color:"#d04648"});c(b,d,e,f)},N:c}}();var za={g:function(c,b,d,e){d=8*c;var f=10*c,g=e.currGame,m=ya(g.rounds,"award"),p=Math.round(g.time/1E3*100)/100+"s";R.text((1===g.status?"Completed":"Failed")+" Level "+g.level,{x:b,y:f,fontSize:d,align:"center",color:"#757161"});f+=.8*d;R.text("Time: "+p+", Earned: $"+m,{x:b,y:f,fontSize:.5*d,align:"center",color:"#757161"});X.v(g.stars,b,f+d,d);e=e.currGame;d=5*c;g=30*c;m=20*c;p=e.rounds.length;f+=.6*g;var h=b-g,v,w=0;for(v=0;v<p;v++){var G=e.rounds[v];var H=G.burgerArr;G.success?X.g(H,h,f,.3,
c):R.text("\ud83d\udfae",{x:h,y:f+3*c,fontSize:10*c,color:"#d04648"});R.i({x:h+g/4,y:f-m/3,b:8,a:5,f:3,color:"#6daa2c",h:c,c:"both",scale:1});R.text("$"+G.award,{x:h+g/4,y:f-m/4,fontSize:.8*d,color:"#346524"});X.v(G.stars,h,f+m/2,d);3===++w?(w=0,h=b-g,f+=m):h+=g}},setData:function(){}};var F=null,D=null;function ya(c,b){var d=0,e,f=c.length;for(e=0;e<f;e++)d+=c[e][b];return d}
(function(){var c,b,d,e,f;function g(){F=document.createElement("canvas");D=F.getContext("2d");document.body.insertBefore(F,document.body.childNodes[0]);window.addEventListener("resize",function(){ja()});window.addEventListener("click",function(a){S=a.pageX;Y=a.pageY});window.addEventListener("touchstart",function(a){S=a.pageX;Y=a.pageY});ja();h();v();G();w();C()}function m(a){l.muteSound||u.play(a)}function p(a){l.muteMusic||u.K(a)}function h(){var a=B.m;t.start=new A("Start",{x:"center",y:30,b:22,
a:12,position:"bottom",font:"Tahoma",fontSize:8,color:"#30346d",mode:a,onclick:ca});t.About=new A("About",{x:-30,y:30,b:20,a:9,position:"bottom-center",font:"Tahoma",fontSize:5,color:"#4e4a4e",mode:a,onclick:function(){return window.open("https://github.com/lewdev/burger-builder")}});t.toggleMuteSound=new A("Sound "+(l.muteSound?"Off":"On"),{x:30,y:33,b:20,a:6,position:"bottom-center",font:"Tahoma",fontSize:4,color:"#4e4a4e",mode:a,onclick:Aa});t.toggleMuteMusic=new A("Music "+(l.muteMusic?"Off":
"On"),{x:30,y:26,b:20,a:6,position:"bottom-center",font:"Tahoma",fontSize:4,color:"#4e4a4e",mode:a,onclick:Ba})}function v(){ka();var a=B.u;t.backLvlSel=new A("Back",{x:-36,y:10,b:22,a:12,position:"center",font:"Tahoma",fontSize:8,color:"#4e4a4e",mode:a,onclick:C});var k,q=-20,n=0,y=0;for(k=0;9>k;k++){var x=k+1;t["level"+x]=new A(x,{x:q+20*n++,y:26+26*y,b:15,a:15,position:"top-center",font:"Tahoma",fontSize:7.5,color:da(x)?"#597dce":"#4e4a4e",mode:a,value:x,onclick:function(){ea(this.value)}});3<=
n&&(n=0,q=-20,y++)}}function w(){var a=B.s;t.endBack=new A("Back",{x:-36,y:15,b:22,a:12,position:"bottom-center",font:"Tahoma",fontSize:8,color:"#4e4a4e",mode:a,onclick:ca});t.playAgain=new A("\u21bb",{x:"center",y:15,b:20,a:14,position:"bottom",font:"Tahoma",fontSize:8,color:"#30346d",mode:a,onclick:ea});var k=da(l.currGame.level+1);t.nextLevel=new A("Next \ud83e\udc46",{x:36,y:15,b:30,a:12,position:"bottom-center",font:"Tahoma",fontSize:8,color:k?"#597dce":"#4e4a4e",mode:a,hidden:9===l.currGame.level,
onclick:function(){var q=l.currGame.level;9===q?N("This is the last level!","#d04648"):ea(q+1)}})}function G(){var a=B.l;t.clear=new A("Clear",{x:-36,y:30,b:22,a:12,position:"bottom-center",font:"Tahoma",fontSize:8,color:"#30346d",mode:a,onclick:la});t.back=new A("Back",{x:-36,y:10,b:22,a:12,position:"center",font:"Tahoma",fontSize:8,color:"#4e4a4e",mode:a,onclick:ca});t.submit=new A("\u25b2",{x:0,y:30,b:22,a:12,position:"bottom-center",font:"Tahoma",fontSize:8,color:"#597dce",mode:a,onclick:Ca});
t.remove=new A("Remove",{x:36,y:30,b:30,a:12,position:"bottom-center",font:"Tahoma",fontSize:8,color:"#30346d",mode:a,onclick:Da});a=sa();var k,q=a.length,n=-(15*(q-1)/2);for(k=0;k<q;k++)H(a[k],n,12),n+=15}function H(a,k,q){var n=X.G(a),y="both";-1<a.indexOf("top")?y="top":-1<a.indexOf("bottom")&&(y="bottom");var x=X.H(a);t[a]=new A(x,{x:k,y:q,b:12,a:12,position:"bottom-center",font:"Tahoma",fontSize:8,c:y,color:n.color,w:"#140c1c",mode:B.l,onclick:function(){m("addPart");l.currGame.currRound.burgerArr.push(a)}})}
function C(){I=B.m;p("menuBgMusic")}function ca(){I=B.u;p("menuBgMusic")}function ka(){l.bestLevels={};var a,k=l.history.length;for(a=0;a<k;a++){var q=l.history[a];if(q.status===O.j){var n="level"+q.level;if(!l.bestLevels[n]||l.bestLevels[n].totalStars<q.totalStars)l.bestLevels[n]=q}}}function da(a){if(1===a)return!0;if(9<a)return!1;var k,q=l.history.length;for(k=0;k<q;k++){var n=l.history[k];if(n.level===a-1&&n.status&&n.status===O.j)return!0}return!1}function ea(a){a=a||1;if(da(a)){var k=Math.floor(1.2*
a);3>k&&(k=3);9<k&&(k=9);var q=Math.floor(1E3*(24-1.5*a)),n=Math.ceil(1.5*a+9),y=Math.ceil(.4*a),x=Math.ceil(.9*a);3>y&&(y=3);3>x&&(x=3);7<x&&(x=7);c=k;b=q;d=y;e=x;f={D:q,A:q/2,o:q/3};Z={D:n,A:Math.ceil(1.5*n),o:Math.ceil(2*n)};l.currGame={roundCount:c,level:a,maxRoundTimeMs:b,startTime:(new Date).getTime(),time:0,failCount:0,status:O.B,currRound:ma(),rounds:[]};N("START\nLevel "+a,"#346524");I=B.l;p("gameBgMusic")}else N("Level "+a+" is locked.","#d04648"),m("noMatch")}function na(){var a=l.currGame,
k=a.rounds.length;3<=a.failCount?(a.status=O.B,oa()):(a.status=O.j,k<a.roundCount?a.currRound=ma():oa())}function Aa(){l.muteSound=!l.muteSound;t.toggleMuteSound.text="Sound "+(l.muteSound?"Off":"On");fa()}function Ba(){l.muteMusic=!l.muteMusic;l.muteMusic?u.M():u.L();t.toggleMuteMusic.text="Music "+(l.muteMusic?"Off":"On");fa()}function oa(){ka();w();v();I=B.s;p("menuBgMusic");var a=l.currGame;a.time=T-a.startTime;var k=ya(a.rounds,"award");l.bank||(l.bank=0);l.bank+=k;k=3*a.roundCount;var q=ya(a.rounds,
"stars");a.totalStars=q;a.stars=0;a.status===O.j&&(q>.75*k?a.stars=3:q>.5*k?a.stars=2:q>.25*k&&(a.stars=1));l.history.push(a);fa()}function ma(){return{targetBurgerArr:X.F(Math.floor(Math.random()*Math.abs(e-d))+d),burgerArr:[],startTime:T,success:!1}}function Ea(){T=(new Date).getTime();if(S){var a=S,k=Y,q;for(q in t){var n=t[q];if(n.mode===I){var y="center"===n.x?E:n.x*z;var x=n.y*z;-1<n.position.indexOf("center")&&(y=E+y);-1<n.position.indexOf("bottom")&&(x=J-x);var K=y-n.b/2*z;var L=x-n.a/2*z;
y+=n.b/2*z;x+=n.a/2*z;if(a>K&&a<y&&k>L&&k<x){n.onclick();break}}}Y=S=!1}R.clear("#140c1c");switch(I){case B.m:va.g(z,E,P,l);break;case B.u:wa.g(z,E,P,l);break;case B.l:a=T-l.currGame.currRound.startTime;l.currGame.currRound.time=a;a>=b&&(l.currGame.failCount++,pa(l.currGame.currRound),l.currGame.rounds.push(l.currGame.currRound),N("Time is up :(","#d04648"),m("noMatch"),na());xa.g(z,E,P,l);break;case B.s:za.g(z,E,P,l)}for(var M in t)a=t[M],console.log("btn.hidden="+a.hidden),a.hidden||(L=a.w||"#6dc2ca",
a.mode===I&&(k="center"===a.x?E:a.x*z,n=a.y*z,-1<a.position.indexOf("center")&&(k=E+k),-1<a.position.indexOf("bottom")&&(n=J-n),K=a.fontSize*z,R.i({x:k,y:n,b:a.b,a:a.a,f:3,color:a.color,h:z,c:a.c,scale:1}),a.text&&R.text(a.text,{x:k,y:n+.3*K,b:a.b,a:a.a,fontSize:K,fontStyle:a.font,align:"center",color:L})));if(Q)if(a=T-Q.time,2E3>a)for(M=0,0<a-1E3&&(M=1-(a-1E3)/1E3),M=0>M?0:M,a=10*z,k=Q.text.split("\n"),n=k.length,K=P-n*(n-1),L=0;L<n;L++)R.text(k[L],{x:E,y:K,fontSize:a,align:"center",color:Q.color,
opacity:M}),K+=1.2*a;else Q=!1}function la(){m("clear");l.currGame.currRound.burgerArr=[]}function Da(){m("clear");l.currGame.currRound.burgerArr.pop()}function Ca(){a:{var a=l.currGame.currRound.burgerArr;var k=l.currGame.currRound.targetBurgerArr,q=a.length;if(q!==k.length)a=!1;else{var n;for(n=0;n<q;n++)if(a[n]!==k[n]){a=!1;break a}a=!0}}a?(pa(l.currGame.currRound),l.currGame.rounds.push(l.currGame.currRound),N(qa(ua)+"!\n"+X.I(l.currGame.currRound.stars),"#346524"),m("match"),na()):(N("NO MATCH",
"#d04648"),m("noMatch"),la())}function pa(a){var k=a.time;k>=b?(a.stars=0,a.award=0):(a.success=!0,0<k&&k<f.o?(a.stars=3,a.award=Z.o):k<f.A?(a.stars=2,a.award=Z.A):k>f.o&&(a.stars=1,a.award=Z.D))}function N(a,k){Q={text:a,color:k,time:(new Date).getTime()}}function Fa(a){var k=window.localStorage.getItem("burger-builder");k&&((k=JSON.parse(k))?l=k:console.error("ERROR: loading local storage data."));a()}function ja(){U=window.innerWidth;F.width=U;E=U/2;J=window.innerHeight;F.height=J;P=J/2;z=U<J?
U/110:J/110}function fa(){window.localStorage.setItem("burger-builder",JSON.stringify(l))}var B={m:1,u:2,l:3,s:4},O={j:1,B:4},T=(new Date).getTime(),t={},I=B.m;var Z=f=e=d=b=c=void 0;var z,U,J,E,P,S,Y,Q=!1,l={currGame:{roundCount:5,time:0,level:1,currRound:{targetBurgerArr:[],burgerArr:[]},rounds:[]},bank:0,items:[],achievements:[],muteSound:!1,muteMusic:!1,history:[]};window.onload=function(){Fa(function(){u.J(function(){g();setInterval(Ea,10)})})}})();
